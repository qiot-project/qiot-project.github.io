<!DOCTYPE html>

<html>

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>
    Hackfest for Retail Use Case - QIoT project
    
  </title>

  <meta name="description" content="Quarkus meets Internet of Things">

  <link href='https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
  <link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="/assets/vendor/bootstrap/css/bootstrap.min.css">

  <link rel="stylesheet" href="/assets/vendor/fontawesome-free/css/all.min.css">

  <link rel="stylesheet" href="/assets/main.css">
  <link rel="canonical" href="/blog/usecase-retail/">
  <link rel="alternate" type="application/rss+xml" title="QIoT project" href="/feed.xml">

  
    
  <!-- Global site tag (gtag.js) - Google Analytics -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-SK96X617FT"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());
  
    gtag('config', 'G-SK96X617FT');
  </script>

  

</head>


<body>

  <!-- Navigation -->
<nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav">
  <div class="container">
    <a class="navbar-brand" href="/">QIoT project</a>
    <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
      Menu
      <i class="fa fa-bars"></i>
    </button>
    <div class="collapse navbar-collapse" id="navbarResponsive">
      <ul class="navbar-nav ml-auto">
<!--         <li class="nav-item"> -->
<!--           <a class="nav-link" href="/">Home</a> -->
<!--         </li> -->
        <li class="nav-item">
          <a class="nav-link" href="/announcements">Announcements</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/usecases">Use Cases</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/projects">Projects</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/blog">Blog</a>
        <li class="nav-item">
          <a class="nav-link" href="/community">Community</a>
        </li>
      </ul>
      </ul>
    </div>
  </div>
</nav>

  <!-- Page Header -->

<header class="masthead" style="background-image: url('/assets/images/posts/usecase-manufacturing/hardware_landscape.jpg')">
  
    <div class="overlay"></div>
    <div class="container">
      <div class="row">
        <div class="col-lg-16 col-md-10 mx-auto">
          <div class="post-heading">
            <h1>Hackfest for Retail Use Case</h1>
            
            <h2 class="subheading">2023, H1, EMEA</h2>
            
            <span class="meta">
            
            
			  
			     
			        
			            <img class="headshot" src="https://www.gravatar.com/avatar/272afa7e145553728bca23a16fe5b3f8">
			        
			            <a href="#">Posted by James Read</a>
			    
			    on March 06, 2023 &middot; <span class="reading-time" title="Estimated read time">
  
   41 mins  read </span>
            
            </span>
            <br>
            <span class="meta">
			  
            </span>
          </div>
        </div>
      </div>
    </div>
  </header>

  <div class="container">
    <div class="row">
      <div class="col-lg-16 col-md-10 mx-auto">

        <div id="toc" class="toc">
<div id="toctitle">Table of Contents</div>
<ul class="sectlevel1">
<li><a href="#context">Context</a></li>
<li><a href="#scenario">Scenario</a>
<ul class="sectlevel2">
<li><a href="#goal">Goal</a></li>
<li><a href="#business-challenges">Business challenges</a></li>
<li><a href="#two-key-red-hat-solution-frameworks-for-retail">Two key Red Hat Solution Frameworks for Retail</a></li>
</ul>
</li>
<li><a href="#hackfest-technical-architecture">Hackfest Technical Architecture</a>
<ul class="sectlevel2">
<li><a href="#architecture-diagram">Architecture diagram</a></li>
<li><a href="#virtual-shop-alternatives">“Virtual Shop” Alternatives</a></li>
</ul>
</li>
<li><a href="#working-with-the-hackfest-team">Working with the Hackfest Team</a>
<ul class="sectlevel2">
<li><a href="#service-desk-operators-and-azure-credits">Service Desk - Operators and Azure credits</a></li>
<li><a href="#not-sure-what-to-do-next-at-hackfest">Not sure what to do next at Hackfest?</a></li>
</ul>
</li>
<li><a href="#the-point-of-sale-pos-edge-device">The Point of Sale (PoS) edge device</a>
<ul class="sectlevel2">
<li><a href="#option-1-hardware-fitlet2">Option 1) Hardware - Fitlet2</a></li>
<li><a href="#option-2-virtual-alternative-rhel-hypervisor-running-in-azure">Option 2) Virtual Alternative; RHEL Hypervisor running in Azure</a></li>
<li><a href="#main-diagram">Main Diagram</a></li>
<li><a href="#operating-system">Operating System</a>
<ul class="sectlevel3">
<li><a href="#containers-with-podman">Containers with Podman</a></li>
</ul>
</li>
<li><a href="#business-logic-services">Business Logic Services</a>
<ul class="sectlevel3">
<li><a href="#qiot-retail-edgepos-service">qiot-retail-edgepos service</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#the-shop-back-office-edge-gateway">The Shop “Back Office” edge gateway</a>
<ul class="sectlevel2">
<li><a href="#option-1-hardware-intel-nuc-running-single-node-openshift">Option 1) Hardware - Intel NUC running Single Node OpenShift</a></li>
<li><a href="#option-2-virtual-alternative-a-shared-aro-cluster">Option 2) Virtual Alternative: A shared ARO cluster</a></li>
<li><a href="#main-diagram-2">Main Diagram</a></li>
<li><a href="#openshift-container-platform">OpenShift Container Platform</a></li>
<li><a href="#infrastructure-services">Infrastructure Services</a>
<ul class="sectlevel3">
<li><a href="#red-hat-amq-streams">Red Hat AMQ Streams</a></li>
<li><a href="#cert-manager-service-issuer">Cert-manager service (issuer)</a></li>
<li><a href="#sql-databases">SQL Databases</a></li>
</ul>
</li>
<li><a href="#business-logic-services-2">Business Logic services</a>
<ul class="sectlevel3">
<li><a href="#edgepos-manager">edgepos-manager</a></li>
<li><a href="#registration-service">registration service</a></li>
</ul>
</li>
</ul>
</li>
<li><a href="#datacenter">Datacenter</a>
<ul class="sectlevel2">
<li><a href="#main-diagram-3">Main Diagram</a></li>
<li><a href="#red-hat-openshift-container-platform">Red Hat OpenShift Container Platform</a></li>
<li><a href="#datacenter-infrastructure-services">Datacenter Infrastructure services</a>
<ul class="sectlevel3">
<li><a href="#stream-service">Stream service</a></li>
<li><a href="#debezium">Database change monitoring with Debezium</a></li>
<li><a href="#crunchydb-postgressql">CrunchyDB - PostgresSQL</a></li>
<li><a href="#prometheus-operator">Prometheus Operator</a></li>
<li><a href="#grafana">Grafana</a></li>
<li><a href="#devspaces">DevSpaces</a></li>
<li><a href="#cert-manager-service">Cert-manager service</a></li>
</ul>
</li>
<li><a href="#business-logic-services-3">Business Logic Services</a>
<ul class="sectlevel3">
<li><a href="#sales-manager">sales-manager</a></li>
<li><a href="#shop-manager">shop-manager</a></li>
<li><a href="#inventory-manager">inventory-manager</a></li>
<li><a href="#distribution-manager">distribution-manager</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="sect1">
<h2 id="context"><a class="anchor" href="#context"></a>Context</h2>
<div class="sectionbody">
<div class="paragraph">
<p>In the post-covid world, retailers are facing huge challenges from
increased competition from online shopping, consumers who are more
concerned about cost than ever before, and many have ageing IT
infrastructure, have outsourced much of their core services, and are
trying to adopt the public clouds more than ever before.</p>
</div>
<div class="paragraph">
<p>This is pushing retailers to look at how they can bring innovation to
the Point of Sale, the Stores, and the Data Centers.</p>
</div>
</div>
</div>
<div class="sect1">
<h2 id="scenario"><a class="anchor" href="#scenario"></a>Scenario</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The business leaders for a retail company know they need to modernise
and improve their IT architecture so that they can try new business
models and explore new ideas. They made a lot of technology investments
with Red Hat and Azure, but don’t know how to guide the IT department to
make best use of this technology to solve business problems. They’ve
brought you in as a potential partner to help them on this journey.</p>
</div>
<div class="paragraph">
<p>You have found that the business leaders don’t speak to the IT
department very often, and they don’t share much detail about what they
want - they just want something better than they have today. They’ve
left you alone as a potential partner, and set you the challenge to use
these recent technology investments with Red Hat and Azure. The business
leaders will speak with their IT department at the end of the month to
find the Top 3 technical implementations, and invite those potential
partners to a business presentation to determine the winner.</p>
</div>
<div class="paragraph">
<p>You know the current architecture of the system has many pain points and
limitations, and as you explore the architecture over next few weeks,
you’re bound to find more issues. It has been “lifted and shifted” into
a container environment, but it isn’t really cloud native, yet.</p>
</div>
<div class="sect2">
<h3 id="goal"><a class="anchor" href="#goal"></a>Goal</h3>
<div class="paragraph">
<p>Your main goal is to build upon the template environment that you start
with, taking into account the solution frameworks, and enablement you’ve
had so far. You have the freedom to improve the microservices, the
development process, the cloud adoption or similar.</p>
</div>
<div class="paragraph">
<p>Your goal is to get the customer to prove to the customer you can use
technology to solve some of their business challenges and be a trusted
partner.</p>
</div>
</div>
<div class="sect2">
<h3 id="business-challenges"><a class="anchor" href="#business-challenges"></a>Business challenges</h3>
<div class="paragraph">
<p>The business leaders don&#8217;t understand the technology, let alone know how
to write a requirements specification. However, after a discovery call
and talking to some industry analysts, you know roughly what the
business is struggling with;</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Revenue: It takes days of process and tools to publish new versions of
existing services.</p>
</li>
<li>
<p>Risk: The release processes and change control around these services
is nonexistent, there isn&#8217;t even a test environment! Changes are made
live to production, putting the whole environment as serious risk when
developers change things.</p>
</li>
<li>
<p>Revenue: Business leaders really want to serve the e-commerce market,
and extend to web sales, but the current architecture can barely keep up
with physical stores!</p>
</li>
<li>
<p>Risk: It&#8217;s almost impossible to know how much inventory is being held
at any one time, and in which area of the business.</p>
</li>
<li>
<p>Risk: The current architecture is so insecure, encryption isn&#8217;t being
used in most places, data at rest, data in transit, all cleartext.</p>
</li>
<li>
<p>Nearly all services cannot be monitored! The teams have no idea how to
build management dashboards, with metrics and monitoring.</p>
</li>
<li>
<p>Developers often use laptops that are locked down and slow, they would
much rather develop in the cloud, close to the code.</p>
</li>
<li>
<p>We&#8217;ve made an investment in OpenShift, but are not yet using it to
it&#8217;s full potential - just some applications have been containerized.
There are few pipelines, monitoring, logging or similar being used.</p>
</li>
</ul>
</div>
<div class="paragraph">
<p>You take a deep breath, and keep the business challenges in mind, as you
look at this application and architecture described in this document.</p>
</div>
<div class="paragraph">
<p>You are provided access to 4 environments, the Point of Sale (Fitlet2),
the Store (Intel NUC), the Warehouse (Azure Red Hat OpenShift) and the
Data Center (Azure Red Hat OpenShift). All these components are
connected to each other as part of a system that serves the retailer to
make money.</p>
</div>
<div class="paragraph">
<p>Lastly, you forget for a moment what products you even sell in your
store! Thankfully, in this Hackfest, you decide it&#8217;s not important, and
can choose which virtual products your store sells, while you focus on
addressing some of those business challenges.</p>
</div>
</div>
<div class="sect2">
<h3 id="two-key-red-hat-solution-frameworks-for-retail"><a class="anchor" href="#two-key-red-hat-solution-frameworks-for-retail"></a>Two key Red Hat Solution Frameworks for Retail</h3>
<div class="paragraph">
<p>This retail company has been talking with Red Hat’s architects on the
topic of validated patterns that could be implemented, on top of 2 key
solution frameworks that affect retailers, around the Point of Sale, and
Cloud Native development. Your team has been given a high level overview
of these solution frameworks, in the hope that your proof of concept
developed during the hackfest could contribute to a validated pattern in
the future.</p>
</div>
<div class="paragraph">
<p><a href="https://developers.redhat.com/topics/red-hat-architecture-and-design-patterns"><em>https://developers.redhat.com/topics/red-hat-architecture-and-design-patterns</em></a></p>
</div>
<div class="imageblock">
<div class="content">
<img src="/assets/images/posts/usecase-retail/retail_pos_high_level.png" alt="image" width="100%">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="/assets/images/posts/usecase-retail/retail_pos_why.png" alt="image" width="100%">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="/assets/images/posts/usecase-retail/retail_cloud_native_dev.png" alt="image" width="100%">
</div>
</div>
<div class="imageblock">
<div class="content">
<img src="/assets/images/posts/usecase-retail/retail_cloud_native_dev_why.png" alt="image" width="100%">
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="hackfest-technical-architecture"><a class="anchor" href="#hackfest-technical-architecture"></a>Hackfest Technical Architecture</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The architecture you’ve been provided by the Retailer’s IT department
consists of 3 main environments.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>There is the Edge Endpoint device, running a Point of Sale (PoS).
There are several of these deployed into each shop building.</p>
</li>
<li>
<p>There is a Shop “Back Office” which is connected to the PoS edge
devices. This is normally a low powered server running in the warehouse
in the shop. This part of the architecture is expected to work offline,
as the shop’s internet connection goes down quite frequently.</p>
</li>
<li>
<p>There is also the public cloud datacenter, which provides several
services to the shop. When the internet connection to the shop is
working, updates are streamed into the datacenter. When the connection
goes down, the “Back Office” server will buffer the updates until the
connection is restored.</p>
</li>
</ol>
</div>
<div class="sect2">
<h3 id="architecture-diagram"><a class="anchor" href="#architecture-diagram"></a>Architecture diagram</h3>
<div class="imageblock">
<div class="content">
<img src="/assets/images/posts/usecase-retail/architecture.png" alt="image" width="100%">
</div>
</div>
</div>
<div class="sect2">
<h3 id="virtual-shop-alternatives"><a class="anchor" href="#virtual-shop-alternatives"></a>“Virtual Shop” Alternatives</h3>
<div class="paragraph">
<p>There are some teams in this Hackfest event which did not receive a
package containing the hardware - a Fitlet 2 Edge Device and Intel NUC
for the Edge Gateway. This is either due to availability, shipping
delays, or problems with shipping to your country.</p>
</div>
<div class="paragraph">
<p>The judges will not penalise you for this, and virtual alternatives to
these environments are available. There are also teams who are working
fully remotely, and may prefer to use a virtual environment instead.</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="working-with-the-hackfest-team"><a class="anchor" href="#working-with-the-hackfest-team"></a>Working with the Hackfest Team</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="service-desk-operators-and-azure-credits"><a class="anchor" href="#service-desk-operators-and-azure-credits"></a>Service Desk - Operators and Azure credits</h3>
<div class="paragraph">
<p>You do not have full administrative access to the entire cluster of ARO
and Azure, but many of the operators you would want to use to install
the architecture, and extend it, have been pre-installed for you in the
Datacenter cluster. The Hackfest admins (“Service Desk”) will happily
install more operators at your request.</p>
</div>
<div class="paragraph">
<p>Additionally, access to an empty Azure Resource Group per team is
available at request - we would ask that if you feel your solution needs
to deploy native Azure services, that you are mindful of the costs, as
running out of Azure credits halfway through the Hackfest would be a
disaster for everyone! If possible, keep as much of your solution inside
OpenShift as possible. As a guideline, a “soft budget” of $500 is
available for Azure credits per team.</p>
</div>
</div>
<div class="sect2">
<h3 id="not-sure-what-to-do-next-at-hackfest"><a class="anchor" href="#not-sure-what-to-do-next-at-hackfest"></a>Not sure what to do next at Hackfest?</h3>
<div class="paragraph">
<p>At Hackfest, we won’t tell you what to do, or what direction to take.
This is an opportunity to learn by doing, and use the skills you have as
a partner to compete in a competition!</p>
</div>
<div class="paragraph">
<p>With that being said, there are support teams here for you, to help you
get past technical blockers, or get more familiar with the technology.
Do ask if you are stuck!</p>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="the-point-of-sale-pos-edge-device"><a class="anchor" href="#the-point-of-sale-pos-edge-device"></a>The Point of Sale (PoS) edge device</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The software running on the edge device runs a single application called
<strong>edgepos</strong>. It has the purpose of being able to process basic
transactions on it’s simple web interface, which is operated by Shop
employees. The software can handle discounts via a decision table, and
records of purchases are sent to the Shop “back office” server which is
a bit more powerful.</p>
</div>
<div class="paragraph">
<p>This hardware running on the edge device is relatively low powered, and
there is one at each shop till. It has ethernet, and a few USB devices
attached to it, and most shops use old monitors that barely support HDMI
1.0!</p>
</div>
<div class="paragraph">
<p>The <strong>edgepos</strong> software was recently upgraded from J2SE running on
Windows XP to Quarkus running in a container on Linux, which should be a
huge improvement in time.</p>
</div>
<div class="sect2">
<h3 id="option-1-hardware-fitlet2"><a class="anchor" href="#option-1-hardware-fitlet2"></a>Option 1) Hardware - Fitlet2</h3>
<div class="paragraph">
<p>The Hardware of choice for the edge device is the Compulab Fitlet2.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/assets/images/posts/usecase-manufacturing/fitlet2.jpg" alt="image" width="100%">
</div>
</div>
<div class="paragraph">
<p>The FITLET2-CE3930 is equipped with Intel® Atom X5-E3930 powered by
Intel®.</p>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Model</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">FITLET2-CE3930-P36</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fan / Fanless</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Fanless</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">CPU</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Intel® Atom x5-3930</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1x 2Gb SO-DIMM 204-pin DDR3L Non-ECC DDR3L-1866 (1.35V)</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Display</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Dual head: mini DP 1.2 4K @ 60 Hz; HDMI 1.4 4K @ 30 Hz</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">WIFI</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">802.11ac dual antenna + BT 4.2</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Ethernet</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">2 GbE ports on-board</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">USB 2.0</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4 USB ports on-board: 2x USB 3.0 + 2x USB 2.0</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Audio</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Stereo line out Realtek ALC1150 audio codec</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Serial Port</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">RS232 mini-serial</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">BIOS</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">AMI Aptio V</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Input voltage range</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Up to DC 9V – 36V*</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Operating system support</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">all</p></td>
</tr>
</tbody>
</table>
<div class="imageblock">
<div class="content">
<img src="/assets/images/posts/usecase-manufacturing/fitlet2-block-diagram.png" alt="fitlet2 block diagram" width="100%">
</div>
</div>
<div class="paragraph">
<p>Additional technical detail can be found at the following <a href="https://fit-iot.com/web/products/fitlet2/fitlet2-specifications/"><em>link</em></a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="option-2-virtual-alternative-rhel-hypervisor-running-in-azure"><a class="anchor" href="#option-2-virtual-alternative-rhel-hypervisor-running-in-azure"></a>Option 2) Virtual Alternative; RHEL Hypervisor running in Azure</h3>
<div class="paragraph">
<p>A RHEL hypervisor virtual machine running in Microsoft Azure. This
machine is pre-installed with QEMU, and has 4 vCPUs, and 16Gb of RAM
(somewhat more powerful than the Fitlet 2). This hypervisor machine can
be accessed with SSH, and you can use the libvirt / qemu tooling to
create virtual machines to simulate a Fitlet 2 / PoS.</p>
</div>
<div class="paragraph">
<p>This may be a far more viable option if your team gets heavily involved
with using FDO to roll out new operating system images, as well - as it
will be faster to test than flashing to a SD card.</p>
</div>
<div class="paragraph">
<p>Please reach out to the “Service Desk” (Hackfest admins) if you’d like
one of these machines provisioned for you.</p>
</div>
</div>
<div class="sect2">
<h3 id="main-diagram"><a class="anchor" href="#main-diagram"></a>Main Diagram</h3>
<div class="imageblock">
<div class="content">
<img src="/assets/images/posts/usecase-retail/edgepos.png" alt="image" width="453" height="731">
</div>
</div>
<div class="paragraph">
<p><strong>Reminder: </strong>Not using RHEL for Edge will lose you many points when it
comes to judging time! Standard RHEL for Podman is just useful for
getting started quickly at the beginning of Hackfest.</p>
</div>
</div>
<div class="sect2">
<h3 id="operating-system"><a class="anchor" href="#operating-system"></a>Operating System</h3>
<div class="imageblock">
<div class="content">
<img src="/assets/images/posts/usecase-manufacturing/brand/Logo-Red_Hat-Edge-A-Standard-RGB.png" alt="image" width="702" height="278">
</div>
</div>
<div class="paragraph">
<p>In an edge computing solution, the operating system is required to be
efficient, lightweight and mature. The team focused on the most
efficient enterprise-grade solution on the marker, which guarantees
security, performance, and container-native solutions. Below a list of
the principal, compulsory features we’ve been looking for in an
operating system:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Must be fully-fledged 64 bit OS (not just its kernel);<br></p>
</li>
<li>
<p>Must have a very small memory footprint;<br></p>
</li>
<li>
<p>Must be immutable or, at least, modular;<br></p>
</li>
<li>
<p>Must have the ability to run a container engine with the minimum
memory footprint, like Podman or CRI-O;<br></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>The most suitable and appropriate operating system, also certified on
the target hardware is <a href="https://www.redhat.com/en/resources/linux-for-edge-datasheet"><em>Red Hat Enterprise Linux for Edge (RHEL for Edge)</em></a>.</p>
</div>
<div class="sect3">
<h4 id="containers-with-podman"><a class="anchor" href="#containers-with-podman"></a>Containers with Podman</h4>
<div class="imageblock">
<div class="content">
<img src="/assets/images/posts/usecase-manufacturing/brand/podman-logo.png" alt="image" width="222" height="222">
</div>
</div>
<div class="paragraph">
<p>Podman is a daemonless, open source, Linux-native tool designed to
develop, manage, and run Open Container Initiative (OCI) containers and
pods.</p>
</div>
<div class="paragraph">
<p>It has a similar directory structure to Buildah, Skopeo, and CRI-O.</p>
</div>
<div class="paragraph">
<p>Podman doesn’t require an active container engine for its commands to
work.</p>
</div>
<div class="paragraph">
<p>Last but not least, Podman is available in the standard rpm library of
RHEL, so you get full support on it.</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="business-logic-services"><a class="anchor" href="#business-logic-services"></a>Business Logic Services</h3>
<div class="sect3">
<h4 id="qiot-retail-edgepos-service"><a class="anchor" href="#qiot-retail-edgepos-service"></a>qiot-retail-edgepos service</h4>
<div class="imageblock">
<div class="content">
<img src="/assets/images/logo/logo-quarkus.png" alt="image" width="100">
</div>
</div>
<div class="paragraph">
<p>The edgepos service is implemented on top of the <a href="https://quarkus.io/"><em>Quarkus</em></a> framework. It can run in several
different ways, but on RHEL for Edge, it would run
<a href="https://quarkus.io/guides/building-native-image"><em>native mode</em></a> on a
container environment.</p>
</div>
<div class="paragraph">
<p>Moreover, the edgepos service is designed and implemented to have the
smallest memory footprint as possible and perform the transactions with
the API exposed by the shop “back office” in the shortest time. The
native mode dramatically improves the performance and guarantees the
full compatibility with the OCI standards and the Podman engine.</p>
</div>
<div class="paragraph">
<p>The edgepos service is responsible for the emulation of a shop “till”,
that scans barcodes, and eventually “checks out” those products. Any
barcode is valid and will generate a valid product, with a fixed price
that is hard coded into the UI - which is very strange for a retail
store…</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/assets/images/posts/usecase-retail/edgepos_ui.png" alt="image" width="100%">
</div>
</div>
<div class="paragraph">
<p>The UI is a simple React application, <a href="https://github.com/qiot-project/qiot-retail-edgepos-ui"><em>qiot-project/qiot-retail-edgepos-ui</em></a>.
This project can be built with <code>npm run build</code>, and the changed files
can should be copied into the qiot-retail-edgepos service, under the
/src/main/resources/META-INF/resources directory.</p>
</div>
<div class="paragraph">
<p>The edgepos service can by found in the
<a href="https://github.com/qiot-project/qiot-retail-edgepos"><em>qiot-project/qiot-retail-edgepos</em></a>
project.</p>
</div>
<div class="paragraph">
<p>When scanning barcodes, or doing a checkout, the UI will call make a
REST API call to <code>/bill</code>, which will emit Kafka messages to a configured
broker.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="the-shop-back-office-edge-gateway"><a class="anchor" href="#the-shop-back-office-edge-gateway"></a>The Shop “Back Office” edge gateway</h2>
<div class="sectionbody">
<div class="sect2">
<h3 id="option-1-hardware-intel-nuc-running-single-node-openshift"><a class="anchor" href="#option-1-hardware-intel-nuc-running-single-node-openshift"></a>Option 1) Hardware - Intel NUC running Single Node OpenShift</h3>
<div class="paragraph">
<p>The Edge Server is based on the powerful Intel® NUC 10 Performance kit -
NUC10i7FNH.</p>
</div>
<div class="paragraph">
<p>The Intel® NUC guarantees performance and stability to the container
platform designed to control any IT systems that operate in the store, most importantly the point of sale machines.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/assets/images/posts/usecase-manufacturing/NUC.jpg" alt="image" width="100%">
</div>
</div>
<table class="tableblock frame-all grid-all stretch">
<colgroup>
<col style="width: 50%;">
<col style="width: 50%;">
</colgroup>
<tbody>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Product Collection</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Intel® NUC Kit with 10th Generation Intel® Core™
Processors</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Board Number</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">NUC10i7FNB</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Board Form Factor</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">UCFF (4" x 4")</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Socket</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">Soldered-down BGA</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"># of Cores</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">6</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock"># of Threads</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">12</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Processor Base Frequency</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">1.10 GHz</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Max Turbo Frequency</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">4.70 GHz</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">RAM</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">DDR4-2666 1.2V SO-DIMM</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Internal Drive Form Factor</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">M.2 and 2.5" Drive</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">SSD</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">M.2 256Gb</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Lithography</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">14 nm</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">TDP</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">14 nm</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">Lithography</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">25 W</p></td>
</tr>
<tr>
<td class="tableblock halign-left valign-top"><p class="tableblock">DC Input Voltage Supported</p></td>
<td class="tableblock halign-left valign-top"><p class="tableblock">19 VDC</p></td>
</tr>
</tbody>
</table>
<div class="paragraph">
<p>Additional technical detail can be found at the following
<a href="https://www.intel.com/content/www/us/en/products/sku/188811/intel-nuc-10-performance-kit-nuc10i7fnh/specifications.html"><em>link</em></a>.</p>
</div>
<div class="paragraph">
<p>The team has provided a detailed walkthrough about How to install SNO on
10th gen NUC <a href="https://qiot-project.github.io/blog/sno-on-nuc10/"><em>here</em></a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="option-2-virtual-alternative-a-shared-aro-cluster"><a class="anchor" href="#option-2-virtual-alternative-a-shared-aro-cluster"></a>Option 2) Virtual Alternative: A shared ARO cluster</h3>
<div class="paragraph">
<p>As the Intel NUC is designed to run OpenShift in this simulation, an
alternative environment is an Azure Red Hat OpenShift environment. This
is a fully capable OpenShift cluster, but will have minimal operators
installed - compared to the DataCenter cluster, which has many operators
installed.</p>
</div>
<div class="paragraph">
<p>This also may be a far more viable option if you are limited by the
speed/availability of of the Intel NUC hardware.</p>
</div>
</div>
<div class="sect2">
<h3 id="main-diagram-2"><a class="anchor" href="#main-diagram-2"></a>Main Diagram</h3>
<div class="imageblock">
<div class="content">
<img src="/assets/images/posts/usecase-retail/backoffice.png" alt="image" width="100%">
</div>
</div>
</div>
<div class="sect2">
<h3 id="openshift-container-platform"><a class="anchor" href="#openshift-container-platform"></a>OpenShift Container Platform</h3>
<div class="imageblock">
<div class="content">
<img src="/assets/images/logo/Logo-Red_Hat-OpenShift-A-Standard-RGB.png" alt="image" width="100%">
</div>
</div>
<div class="paragraph">
<p>Red Hat has worked a make OpenShift footprint smaller to fit into more
constrained environments by putting both control and worker capabilities
into a single node. If you are using the shared Shop cluster instead,
then your environment is larger than a single node, but it’s
functionality is the same.</p>
</div>
</div>
<div class="sect2">
<h3 id="infrastructure-services"><a class="anchor" href="#infrastructure-services"></a>Infrastructure Services</h3>
<div class="sect3">
<h4 id="red-hat-amq-streams"><a class="anchor" href="#red-hat-amq-streams"></a>Red Hat AMQ Streams</h4>
<div class="imageblock">
<div class="content">
<img src="/assets/images/logo/logo-kafka.png" alt="image" width="160">
</div>
</div>
<div class="paragraph">
<p>An enterprise distribution of Apache Kafka, Red Hat AMQ Streams is a
data streaming platform. It can be installed as a simple service on
RHEL, or easily using the Integration operator on OpenShift.</p>
</div>
<div class="paragraph">
<p>Services can connect to the provider to publish, or receive messages
over a channel, making it easy to build event-driven architectures, with
loose coupling between services.</p>
</div>
<div class="paragraph">
<p>Kafka instances can be connected in several ways, but this template
architecture uses MirrorMaker2 to connect a Kafka instance running on
the Shop Back Office OpenShift to a Kafka instance running in the
Datacenter instance of Kafka. This allows messages about purchases to
reach the datacenter, even if the connection goes down temporarily.</p>
</div>
<div class="paragraph">
<p>Kafka is a vibrant ecosystem of supporting services, including Connect
(Debezium), and MirrorMaker2.</p>
</div>
<div class="imageblock">
<div class="content">
<img src="/assets/images/posts/usecase-retail/kafka-ecosystem.png" alt="image" width="447" height="488">
</div>
</div>
</div>
<div class="sect3">
<h4 id="cert-manager-service-issuer"><a class="anchor" href="#cert-manager-service-issuer"></a>Cert-manager service (issuer)</h4>
<div class="imageblock">
<div class="content">
<img src="/assets/images/logo/logo-cert-manager.png" alt="image" width="160">
</div>
</div>
<div class="paragraph">
<p>Cert-manager automates certificate management in cloud native
environments and thus helped with the implementation of a dynamic
certificate provisioning for edge devices</p>
</div>
<div class="paragraph">
<p>Cert-manager builds on top of Kubernetes Custom Resource Definitions
(CRDs), introducing certificate authorities and certificates as
first-class resource types in the Kubernetes API.</p>
</div>
<div class="paragraph">
<p>This makes it possible to provide 'certificates as a service' to
developers working within your Kubernetes cluster.</p>
</div>
<div class="paragraph">
<p>Highlights: Provide easy to use tools to manage certificates.</p>
</div>
<div class="ulist">
<ul>
<li>
<p>A standardised API for interacting with multiple certificate
authorities (CAs).<br></p>
</li>
<li>
<p>Gives security teams the confidence to allow developers to self-server
certificates.<br></p>
</li>
<li>
<p>Support for ACME (Let’s Encrypt), HashiCorp Vault, Venafi, self signed
and internal certificate authorities.<br></p>
</li>
<li>
<p>Extensible to support custom, internal or otherwise unsupported CAs.<br>
+</p>
</li>
</ul>
</div>
</div>
<div class="sect3">
<h4 id="sql-databases"><a class="anchor" href="#sql-databases"></a>SQL Databases</h4>
<div class="imageblock">
<div class="content">
<img src="/assets/images/posts/usecase-retail/crunchydb.png" alt="image" width="160">
</div>
</div>
<div class="paragraph">
<p>PostgreSQL is a powerful, open source object-relational database system
with over 30 years of active development that has earned it a strong
reputation for reliability, feature robustness, and performance.</p>
</div>
<div class="paragraph">
<p>It is recommended to use the CrunchyDB Operator to install Postgres,
which can be configured to expose the transaction logs to services like
Debezium (Kafka Connect).</p>
</div>
</div>
</div>
<div class="sect2">
<h3 id="business-logic-services-2"><a class="anchor" href="#business-logic-services-2"></a>Business Logic services</h3>
<div class="sect3">
<h4 id="edgepos-manager"><a class="anchor" href="#edgepos-manager"></a>edgepos-manager</h4>
<div class="imageblock">
<div class="content">
<img src="/assets/images/logo/logo-quarkus.png" alt="image" width="100">
</div>
</div>
<div class="paragraph">
<p>The edgepos-manager service is is implemented on top of the <a href="https://quarkus.io/"><em>Quarkus</em></a> framework.</p>
</div>
<div class="paragraph">
<p>Several instances of the edgepos service can send messages about
purchases back to a single edgepos-manager service.</p>
</div>
<div class="paragraph">
<p>The data model used to talk inbetween the edgepos and edgepos-manager is
in the
<a href="https://github.com/qiot-project/qiot-retail-edgepos-model"><em>qiot-project/qiot-retail-edgepos-model</em></a>
repository.</p>
</div>
<div class="paragraph">
<p>More details can be found in the
<a href="https://github.com/qiot-project/qiot-retail-edgepos-manager"><em>qiot-project/qiot-retail-edgepos-manger</em></a>
repository.</p>
</div>
</div>
<div class="sect3">
<h4 id="registration-service"><a class="anchor" href="#registration-service"></a>registration service</h4>
<div class="paragraph">
<p>This service is a suggested concept in the architecture, and is NOT
implemented (ie, there is no code).</p>
</div>
<div class="paragraph">
<p>This is because at the moment there is no concept of registration, or
security, between the Point of Sale and the edgepos-manager service.</p>
</div>
<div class="paragraph">
<p>One potential solution to this is mutual TLS, handled by a registration
service. However, the implementation is left entirely up to you to
decide.</p>
</div>
</div>
</div>
</div>
</div>
<div class="sect1">
<h2 id="datacenter"><a class="anchor" href="#datacenter"></a>Datacenter</h2>
<div class="sectionbody">
<div class="paragraph">
<p>The Datacenter area of the architecture is hosted entirely by a Azure
Red Hat OpenShift cluster. This cluster contains two default namespaces,
<code>team-production</code> and <code>team-development</code>, but you may create additional
namespaces as needed.</p>
</div>
<div class="paragraph">
<p>This cluster as a largen umber of useful operators pre-installed;</p>
</div>
<div class="ulist">
<ul>
<li>
<p>OpenShift DevSpaces operator - providing a “development environment in
the cloud” based on visual studio / eclipse Che. This allows for rapid
prototyping of new services inside OpenShift.</p>
</li>
<li>
<p>Red Hat Integration operator, providing AMQ Streams (Kafka), Connect
(Debezium), and MirrorMaker2, as well as several other useful resources.</p>
</li>
<li>
<p>OpenShift Service Mesh Operator. Although, the services that you have
today don’t really make use of Service Mesh - which is a real lost
opportunity.</p>
</li>
<li>
<p>Web Terminal operator - making it easy to get access to the <code>oc</code>
command, and other useful Openshift command line tools.</p>
</li>
<li>
<p>cert-manager - as described previously.</p>
</li>
<li>
<p>CrunchyDB - as described previously, to install PostgresQL.</p>
</li>
</ul>
</div>
<div class="sect2">
<h3 id="main-diagram-3"><a class="anchor" href="#main-diagram-3"></a>Main Diagram</h3>
<div class="imageblock">
<div class="content">
<img src="/assets/images/posts/usecase-retail/datacenter.png" alt="image" width="1051" height="940">
</div>
</div>
</div>
<div class="sect2">
<h3 id="red-hat-openshift-container-platform"><a class="anchor" href="#red-hat-openshift-container-platform"></a>Red Hat OpenShift Container Platform</h3>
<div class="imageblock">
<div class="content">
<img src="/assets/images/logo/Logo-Red_Hat-OpenShift-A-Standard-RGB.png" alt="image" width="100%">
</div>
</div>
<div class="paragraph">
<p>Red Hat OpenShift is the hybrid cloud platform of open possibility:
powerful, so you can build anything and flexible, so it works anywhere.</p>
</div>
<div class="paragraph">
<p>Adopting the Openshift container platform made us save tons of hors
implementing features and behaviors supposed to be home cooked,
otherwise:</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Native pipelines using Tekton<br></p>
</li>
<li>
<p>One-shot installation using Helm charts<br></p>
</li>
<li>
<p>2-day operations using Operator Framework<br></p>
</li>
<li>
<p>Container storage<br></p>
</li>
<li>
<p>Security and Isolation<br></p>
</li>
<li>
<p>Automate cluster scalability<br></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>More about OpenShift Container Platform can be found <a href="https://www.openshift.com/learn/developer"><em>here</em></a>.</p>
</div>
</div>
<div class="sect2">
<h3 id="datacenter-infrastructure-services"><a class="anchor" href="#datacenter-infrastructure-services"></a>Datacenter Infrastructure services</h3>
<div class="sect3">
<h4 id="stream-service"><a class="anchor" href="#stream-service"></a>Stream service</h4>
<div class="imageblock">
<div class="content">
<img src="/assets/images/logo/logo-kafka.png" alt="image" width="160">
</div>
</div>
<div class="paragraph">
<p>In the forecast of the need for receiving/handling a large number of
concurrent messages, A-MQ Streams is the component of choice for
streaming messages through the integration and the storage layers.</p>
</div>
<div class="paragraph">
<p>An internal streaming service guarantees scalability and reliability of
the message flow management within the Datacenter business logic.</p>
</div>
<div class="paragraph">
<p>This design makes it a lot easier to decouple the implementation details
of the integration services responsible for offloading (consuming
messages from) every topic and storing the values into the storage tier,
improving horizontal scalability.</p>
</div>
<div class="paragraph">
<p>More about A-MQ Streams can be found <a href="https://developers.redhat.com/blog/2019/06/06/accessing-apache-kafka-in-strimzi-part-1-introduction/"><em>here</em></a>.</p>
</div>
</div>
<div class="sect3">
<h4 id="debezium"><a class="anchor" href="#debezium"></a>Database change monitoring with Debezium</h4>
<div class="imageblock">
<div class="content">
<img src="/assets/images/posts/usecase-retail/debezium.png" alt="image" width="724" height="294">
</div>
</div>
<div class="paragraph">
<p>Debizum is an important part of the Red Hat Inegration and Kafka
ecosystem. It is used not just in quarkus, or java projects, but it
connects to your database transaction logs, and looks for updates. It
can respond to inserts, deletes, updates and changes from any
application (as it listens to the database) and respond with a Kafka
event.</p>
</div>
<div class="paragraph">
<p>In modern cloud native architectures, debezium allows you to build
loosely coupled microservices and event driven architectures with ease -
creating powerful new events simply by editing configuration.</p>
</div>
<div class="paragraph">
<p><a href="https://access.redhat.com/documentation/en-us/red_hat_integration/2022.q4/html/installing_debezium_on_openshift"><em>Installing
Debezium on OpenShift Red Hat Integration 2022.q4</em></a></p>
</div>
<div class="paragraph">
<p><a href="https://access.redhat.com/documentation/en-us/red_hat_integration/2022.q4/html/debezium_user_guide"><em>Debezium
User Guide Red Hat Integration 2022.q4</em></a></p>
</div>
</div>
<div class="sect3">
<h4 id="crunchydb-postgressql"><a class="anchor" href="#crunchydb-postgressql"></a>CrunchyDB - PostgresSQL</h4>
<div class="imageblock">
<div class="content">
<img src="/assets/images/posts/usecase-retail/crunchydb.png" alt="image" width="160">
</div>
</div>
<div class="paragraph">
<p>PostgresSQL hardly needs any introduction, it’s one of the most popular
open source databases, well known and trustued for it’s scalability and
performance in the enterprise space.</p>
</div>
<div class="paragraph">
<p>Red Hat recommends using the CrunchyDB operator to easily install
PostgresSQL on OpenShift, in particular because the operator includes
support for exposing transaction logs to Debezium as well. Note that not
all PostgresSQL container images support exposing the transaction logs,
so, do use the operator!</p>
</div>
<div class="paragraph">
<p><a href="https://cloud.redhat.com/blog/crunchy-data-postgresql-on-red-hat-openshift"><em>https://cloud.redhat.com/blog/crunchy-data-postgresql-on-red-hat-openshift</em></a></p>
</div>
</div>
<div class="sect3">
<h4 id="prometheus-operator"><a class="anchor" href="#prometheus-operator"></a>Prometheus Operator</h4>
<div class="imageblock">
<div class="content">
<img src="/assets/images/posts/usecase-retail/prometheus.png" alt="image" width="829" height="370">
</div>
</div>
<div class="paragraph">
<p>Prometheus is the defacto time series merics database, which is
pervasively used in cloud native architectures - Kubernetes is no
exception. While OpenShift includes Prometheus as part of the cluster
infrastructure, it is commonly misunderstood how to use that Prometheus
instance with your applications.</p>
</div>
<div class="paragraph">
<p>The short answer, is that you don’t! Leave OpenShift to manage it’s
Prometheus, but us the operator to deploy a Prometheus instance just for
your application(s). This separates cluster logic and business logic.</p>
</div>
<div class="paragraph">
<p>You will see at least one Microservice has elementary Prometheus support
- consider studying this code and adding Prometheus to all of your
services, giving a standard, well supported API to monitor and pull in
metrics.</p>
</div>
</div>
<div class="sect3">
<h4 id="grafana"><a class="anchor" href="#grafana"></a>Grafana</h4>
<div class="imageblock">
<div class="content">
<img src="/assets/images/posts/usecase-retail/grafana.png" alt="image" width="160">
</div>
</div>
<div class="paragraph">
<p>Grafana also should not need much of an introduction, as it’s powerful
dashboards are built into OpenShift as well. Much like prometheus, we
find customers frequently trying to use the cluster Grafana instance for
their applications. Using Grafana is the right idea, but instead, use
the operator to deploy a Grafana instance just for your apps, in your
namespace. This allows you to build powerful dashboards, charts and
graphs to showcase the performance and availability of components of
your architecture.</p>
</div>
</div>
<div class="sect3">
<h4 id="devspaces"><a class="anchor" href="#devspaces"></a>DevSpaces</h4>
<div class="imageblock">
<div class="content">
<img src="/assets/images/posts/usecase-retail/devspaces.png" alt="image" width="160">
</div>
</div>
<div class="paragraph">
<p>OpenShift recently upgraded DevSpaces to include Visual Studio Code Web
- which provides for a hosted, secure, private, container-based IDE in
the cloud. Using DevSpaces will not necessarily give you any points at
Hackfest, but hopefully you find it useful!</p>
</div>
</div>
<div class="sect3">
<h4 id="cert-manager-service"><a class="anchor" href="#cert-manager-service"></a>Cert-manager service</h4>
<div class="imageblock">
<div class="content">
<img src="/assets/images/logo/logo-cert-manager.png" alt="image" width="160">
</div>
</div>
<div class="paragraph">
<p>Cert-manager automates certificate management in cloud native
environments and thus helped with the implementation of a dynamic
certificate provisioning for edge devices</p>
</div>
<div class="paragraph">
<p>cert-manager builds on top of Kubernetes, introducing certificate
authorities and certificates as first-class resource types in the
Kubernetes API.</p>
</div>
<div class="paragraph">
<p>This makes it possible to provide 'certificates as a service' to
developers working within your Kubernetes cluster.</p>
</div>
<div class="paragraph">
<p>Highlights</p>
</div>
<div class="ulist">
<ul>
<li>
<p>Provide easy to use tools to manage certificates.<br></p>
</li>
<li>
<p>A standardised API for interacting with multiple certificate
authorities (CAs).<br></p>
</li>
<li>
<p>Gives security teams the confidence to allow developers to self-server
certificates.<br></p>
</li>
<li>
<p>Support for ACME (Let’s Encrypt), HashiCorp Vault, Venafi, self signed
and internal certificate authorities.<br></p>
</li>
<li>
<p>Extensible to support custom, internal or otherwise unsupported CAs.<br></p>
</li>
</ul>
</div>
<div class="paragraph">
<p>More about Cert-Manager can be found <a href="https://cert-manager.io/">cert-manager.io</a>.</p>
</div>
<div class="olist arabic">
<ol class="arabic">
<li>
<p>Enable Kubernetes Auth Engine in Vault.<br></p>
</li>
<li>
<p>Authorize Vault SA in k8s to Token Review.<br></p>
</li>
<li>
<p>Enable PKI engine.<br></p>
</li>
<li>
<p>Configure PKI role name in Vault.<br></p>
</li>
<li>
<p>Configure PKI policy in Vault.<br></p>
</li>
<li>
<p>Authorize/Binding issuer SA to use (policy) the PKI role.<br></p>
</li>
<li>
<p>Create Vault Issuer in app namespace with issuer SA.<br></p>
</li>
<li>
<p>Cert Manager validates the credentials of the issuer against Vault.<br></p>
</li>
</ol>
</div>
</div>
</div>
<div class="sect2">
<h3 id="business-logic-services-3"><a class="anchor" href="#business-logic-services-3"></a>Business Logic Services</h3>
<div class="sect3">
<h4 id="sales-manager"><a class="anchor" href="#sales-manager"></a>sales-manager</h4>
<div class="paragraph">
<p>This service is a suggested concept in the architecture, and is NOT
implemented (ie, there is no code).</p>
</div>
<div class="paragraph">
<p>The edgepos service emits events when the cart is updated, and that
event contains isCheckout for checkout time. One suggested approach to
implementing a central billing and reporting system is to listen for
these events in the edgepos-manager service, and then emit a new event
back onto the steaming service, so that a sales-manager service can pick
up checkouts, totals, and a list of items, for example.</p>
</div>
</div>
<div class="sect3">
<h4 id="shop-manager"><a class="anchor" href="#shop-manager"></a>shop-manager</h4>
<div class="paragraph">
<p>This service is a suggested concept in the architecture, and is NOT
implemented (ie, there is no code).</p>
</div>
<div class="paragraph">
<p>The shop-manager service could listen for new edgepos services being
provisioned, and update a central list, or database of shops, and points
of sale. The shop manager could also be used to classify different
shops, enable features only in certain locations, or at certain times.</p>
</div>
</div>
<div class="sect3">
<h4 id="inventory-manager"><a class="anchor" href="#inventory-manager"></a>inventory-manager</h4>
<div class="imageblock">
<div class="content">
<img src="/assets/images/logo/logo-quarkus.png" alt="image" width="100">
</div>
</div>
<div class="paragraph">
<p>The inventory-manager service is is implemented on top of the <a href="https://quarkus.io/"><em>Quarkus</em></a> framework.</p>
</div>
<div class="paragraph">
<p>The inventory manager service is a crude create/list/delete web UI,
build ontop of a single postgresql table. This simple implementation
allows you to extend it in various different ways.</p>
</div>
<div class="paragraph">
<p>The design intent of the architecture, is to use <a href="#debezium">Debezium</a>, to do
change-data-capture on the database, and emit events back to the
streaming API as product prices get updated, or new products are added.</p>
</div>
<div class="paragraph">
<p>The edgepos servicie can by found in the <a href="https://github.com/qiot-project/qiot-retail-inventory-manager"><em>qiot-project/qiot-retail-inventory-manager</em></a> project.</p>
</div>
</div>
<div class="sect3">
<h4 id="distribution-manager"><a class="anchor" href="#distribution-manager"></a>distribution-manager</h4>
<div class="paragraph">
<p>This service is a suggested concept in the architecture, and is NOT
implemented (ie, there is no code).</p>
</div>
<div class="paragraph">
<p>The distribution-manager service could help shops and warehouses control
how much product they have in a specific location, making it easier to
identify stock that is running out, or stock that need a special offer
to be sold quickly.</p>
</div>
</div>
</div>
</div>
</div>

        <div id="share-bar">

    <hr>

    <h4>Share this:</h4>

    <div class="share-buttons">
        <a  href="https://www.facebook.com/sharer/sharer.php?u=/blog/usecase-retail/"
            onclick="window.open(this.href, 'pop-up', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;"
            title="Share on Facebook" >
            <span class="fa-stack fa-lg">
                <i class="fas fa-circle fa-stack-2x"></i>
                <i class="fab fa-facebook-f fa-stack-1x fa-inverse"></i>
              </span>
        </a>
        <a  href="https://twitter.com/intent/tweet?text=Hackfest for Retail Use Case&url=/blog/usecase-retail/"
            onclick="window.open(this.href, 'pop-up', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;"
            title="Share on Twitter" >
            <span class="fa-stack fa-lg">
                <i class="fas fa-circle fa-stack-2x"></i>
                <i class="fab fa-twitter fa-stack-1x fa-inverse"></i>
              </span>
        </a>
        <a  href="http://www.reddit.com/submit?url=/blog/usecase-retail/"
            onclick="window.open(this.href, 'pop-up', 'left=20,top=20,width=900,height=500,toolbar=1,resizable=0'); return false;"
            title="Share on Reddit" >
            <span class="fa-stack fa-lg">
                <i class="fas fa-circle fa-stack-2x"></i>
                <i class="fab fa-reddit fa-stack-1x fa-inverse"></i>
              </span>
        </a>
        <a  href="https://www.linkedin.com/shareArticle?mini=true&url=/blog/usecase-retail/&title=Hackfest for Retail Use Case&summary=&source=QIoT project"
            onclick="window.open(this.href, 'pop-up', 'left=20,top=20,width=500,height=500,toolbar=1,resizable=0'); return false;"
            title="Share on LinkedIn" >
            <span class="fa-stack fa-lg">
                <i class="fas fa-circle fa-stack-2x"></i>
                <i class="fab fa-linkedin fa-stack-1x fa-inverse"></i>
              </span>
        </a>
        <a  href="mailto:?subject=Hackfest for Retail Use Case&amp;body=Check out this site /blog/usecase-retail/"
            title="Share via Email" >
            <span class="fa-stack fa-lg">
                <i class="fas fa-circle fa-stack-2x"></i>
                <i class="far fa-envelope fa-stack-1x fa-inverse"></i>
              </span>
        </a>
    </div>

</div>

        <hr>

<!--         <div class="clearfix"> -->
<!--            -->
<!--           <a class="btn btn-primary float-left" href="/blog/sno-on-nuc10/" data-toggle="tooltip" data-placement="top" title="Install Single Node OpenShift on Intel® 10th gen NUC">&larr; Previous<span class="d-none d-md-inline"> -->
<!--               Post</span></a> -->
<!--            -->
<!--            -->

	  
	  
	  
	  

        <div class="clearfix">
          
          <a class="btn btn-primary float-left" href="/blog/usecase-manufacturing/" data-toggle="tooltip" data-placement="top" title="PoC Edge Manufacturing">&larr; Previous<span class="d-none d-md-inline">
              Post</span></a>
          
          
        </div>

      </div>
    </div>
  </div>

  <!-- Footer -->

<hr>

<footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-16 col-md-10 mx-auto">
        <ul class="list-inline text-center">
          
          <li class="list-inline-item">
            <a href="mailto:qiotproject@gmail.com">
              <span class="fa-stack fa-lg">
                <i class="fas fa-circle fa-stack-2x"></i>
                <i class="far fa-envelope fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
          
          <li class="list-inline-item">
            <a href="https://twitter.com/qiotproject">
              <span class="fa-stack fa-lg">
                <i class="fas fa-circle fa-stack-2x"></i>
                <i class="fab fa-twitter fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
          
          
          
          <li class="list-inline-item">
            <a href="https://github.com/qiot-project">
              <span class="fa-stack fa-lg">
                <i class="fas fa-circle fa-stack-2x"></i>
                <i class="fab fa-github fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
          
          
          <li class="list-inline-item">
            <a href="https://join.slack.com/t/https://join.slack.com/t/qiotproject/shared_invite/zt-nuajdyqf-NfQL0dcfCUjFSgoBNng11A">
              <span class="fa-stack fa-lg">
                <i class="fas fa-circle fa-stack-2x"></i>
                <i class="fab fa-slack fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
          
          <li class="list-inline-item">
            <a href="https://groups.google.com/u/0/g/qiotproject/qiotproject">
              <span class="fa-stack fa-lg">
                <i class="fas fa-circle fa-stack-2x"></i>
                <i class="fab fa-google fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
          
          <li class="list-inline-item">
            <a href="https://calendar.google.com/event?action=TEMPLATE&tmeid=dmFxMzFlZGkxOHVubDcyYm50bjdrcTJxYThfMjAyMTAzMjVUMTYwMDAwWiBxaW90cHJvamVjdEBt&tmsrc=qiotproject%40gmail.com&scp=ALL">
              <span class="fa-stack fa-lg">
                <i class="fas fa-circle fa-stack-2x"></i>
                <i class="fas fa-calendar-plus fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
        </ul>
        <p class="copyright text-muted"><i class="fab fa-creative-commons"></i><i class="fab fa-creative-commons-by"></i> <a href="https://creativecommons.org/licenses/by/3.0/" target="_blank">CC by 3.0</a> | <a href="https://www.redhat.com/en/about/privacy-policy">Privacy Policy</a> | Copyright &copy;  2024</p>
      </div>
    </div>
  </div>
</footer>

  <script src="/assets/vendor/jquery/jquery.min.js"></script>
<script src="/assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="/assets/vendor/startbootstrap-clean-blog/js/clean-blog.min.js"></script>

<script src="/assets/scripts.js"></script>




</body>

</html>
